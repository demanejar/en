<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9TR0K3B846"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8714452693053438" crossorigin="anonymous"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9TR0K3B846'); </script><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Docker Basics and Practice" /><meta name="author" content="viethoang" /><meta property="og:locale" content="en_US" /><meta name="description" content="This article is referenced and noted from the Docker practice series on Viblo." /><meta property="og:description" content="This article is referenced and noted from the Docker practice series on Viblo." /><link rel="canonical" href="https://demanejar.github.io/en/posts/Docker/" /><meta property="og:url" content="https://demanejar.github.io/en/posts/Docker/" /><meta property="og:site_name" content="De Manejar" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-28T20:52:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Docker Basics and Practice" /><meta name="twitter:site" content="@DeManejar" /><meta name="twitter:creator" content="@viethoang" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"viethoang"},"dateModified":"2026-01-02T21:54:12+07:00","datePublished":"2021-07-28T20:52:00+07:00","description":"This article is referenced and noted from the Docker practice series on Viblo.","headline":"Docker Basics and Practice","mainEntityOfPage":{"@type":"WebPage","@id":"https://demanejar.github.io/en/posts/Docker/"},"url":"https://demanejar.github.io/en/posts/Docker/"}</script><title>Docker Basics and Practice | De Manejar</title><link rel="shortcut icon" href="/en/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/en/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/en/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/en/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/en/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/en/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/en/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/en/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/en/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/en/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/en/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/en/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/en/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/en/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/en/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/en/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/en/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/en/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/en/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/en/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/en/" alt="avatar" class="mx-auto"> <img src="https://i.pinimg.com/564x/9c/32/79/9c3279b5ac960533cbcb7e833ac4d947.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/en/">De Manejar</a></div><div class="site-subtitle font-italic">Hello Bigdata !</div></div><ul class="w-100"><li class="nav-item"> <a href="/en/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/en/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/en/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/en/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/en/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/demanejar" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/DeManejar" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['demanejar','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/en/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/en/"> Posts </a> </span> <span>Docker Basics and Practice</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Docker Basics and Practice</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> viethoang </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 28, 2021, 8:52 PM +0700" prep="on" > Jul 28, 2021 <i class="unloaded">2021-07-28T20:52:00+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 2, 2026, 9:54 PM +0700" prefix="Updated " > Jan 2 <i class="unloaded">2026-01-02T21:54:12+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2834 words">15 min</span></div></div><div class="post-content"><p>This article is referenced and noted from the Docker practice series on Viblo.</p><p>Link to the series: <a href="https://viblo.asia/s/thuc-hanh-docker-tu-can-ban-68Z00n0zZkG">Docker Practice from Basics</a></p><h1 id="i-installing-docker-and-some-basic-concepts">I. Installing Docker and Some Basic Concepts</h1><p>Installation can be referenced in the documentation</p><h2 id="what-is-docker">WHAT IS DOCKER</h2><h3 id="benefits-of-containerized-applications">Benefits of Containerized Applications</h3><ul><li>Build once, use everywhere (works on my machine problem solved)<li>Isolated environment<li>Easy development<li>Scalability (container orchestration)</ul><blockquote><p>Previously, virtual machines had similar properties, but why is there Docker? Docker virtualizes at the operating system level while virtual machines virtualize at the hardware level</p></blockquote><h3 id="images-and-containers">IMAGES AND CONTAINERS</h3><p>Since we already know what containers are, it’s easier to explain images through them: Containers are instances of images. A basic mistake is to confuse images and containers.</p><p>Docker images are a (read-only) file that cannot be changed (actually you can add layers by starting from a base image). Images are created by building an instruction file called Dockerfile.</p><p>Containers are created from images (read-write). They will contain what is necessary to run the program and are an isolated environment on the server that can interact with other machines and itself through TCP/UDP protocols.</p><p><em>Docker run vs Docker start: The command <code class="language-plaintext highlighter-rouge">docker run</code> is used to only <strong>START</strong> a container for the very first time. To run an existing container, what you need is <code class="language-plaintext highlighter-rouge">docker start $container-name</code></em></p><p><em>docker run = create docker container + start docker container</em></p><h1 id="ii-sharing-data-between-host-container-container-container">II. Sharing Data Between Host-Container, Container-Container</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/refs/heads/main/Docker/docker_container.jpg" alt="" /></p><p>Sharing data means containers want to operate or use data on the host machine or on other containers.</p><h2 id="sharing-data-between-host-and-container">Sharing Data Between Host and Container</h2><p>Suppose we just created data on the host machine with path X</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">-ti</span> <span class="nt">-v</span> /home/viethoang/petproject:/home/petproject_container ubuntu
</pre></table></code></div></div><p>Explanation of parameters:</p><p>-<code class="language-plaintext highlighter-rouge">ti</code>: provides operations and connection on terminal</p><p>-<code class="language-plaintext highlighter-rouge">v</code>: shares data between host and container. The first path is the host machine’s, the one after : is the container’s. ubuntu is the Ubuntu operating system image</p><p>After running the command, we enter the container’s terminal and see the “petproject” folder on the host mapped to the “petproject_container” folder. Any changes in the folder on the host will affect the container and vice versa, for example adding new files or deleting. The same applies when in the container. However, if we delete the container, the data on the host remains.</p><h2 id="sharing-data-between-2-containers">Sharing Data Between 2 Containers</h2><p>Now we have data on the host machine that we want to share with both containers. We already have 1 container shared from the host with id as shown below, so to share data from the host to the remaining container, we can use the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">-ti</span> <span class="nt">--name</span> C2 <span class="nt">--volume-from</span> a8232b31eb20 ubuntu 
</pre></table></code></div></div><h2 id="managing-volumes-to-share-data-for-containers">Managing Volumes to Share Data for Containers</h2><p>When a container is created, a volume is also created and assigned to that container. When the container is deleted, those volumes remain there and only disappear when we delete them directly.</p><h3 id="1-creating-a-volume">1. Creating a Volume</h3><p>Command <code class="language-plaintext highlighter-rouge">docker volume ls</code> to view volumes.</p><p>Create a new volume named D1: <code class="language-plaintext highlighter-rouge">docker volume create D1</code>.</p><h3 id="2-assigning-a-volume-to-a-container">2. Assigning a Volume to a Container</h3><p>We execute the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> docker run <span class="nt">-it</span> <span class="nt">--name</span> C3 <span class="nt">--mount</span> <span class="nb">source</span><span class="o">=</span>D1,target<span class="o">=</span>/home/disk ubuntu
</pre></table></code></div></div><p>Parameter <code class="language-plaintext highlighter-rouge">--mount</code> is to assign an additional volume when creating a container</p><p><code class="language-plaintext highlighter-rouge">source=D1</code> is the volume parameter to assign to the container</p><p><code class="language-plaintext highlighter-rouge">target=/home/disk</code> with /home/disk being the folder that maps volume D1 into the container</p><h3 id="3-creating-a-volume-mapped-to-the-host-machine">3. Creating a Volume Mapped to the Host Machine</h3><p>Now we want a volume mapped to a fixed folder already on the host:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker volume create <span class="nt">--opt</span> <span class="nv">device</span><span class="o">=</span>/home/viethoang/petproject <span class="nt">--opt</span> <span class="nb">type</span><span class="o">=</span>none <span class="nt">--opt</span> <span class="nv">o</span><span class="o">=</span><span class="nb">bind </span>D2
</pre></table></code></div></div><p>Check again:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>~ docker volume inspect D2
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"CreatedAt"</span>: <span class="s2">"2021-07-28T16:19:19+07:00"</span>,
        <span class="s2">"Driver"</span>: <span class="s2">"local"</span>,
        <span class="s2">"Labels"</span>: <span class="o">{}</span>,
        <span class="s2">"Mountpoint"</span>: <span class="s2">"/var/lib/docker/volumes/D2/_data"</span>,
        <span class="s2">"Name"</span>: <span class="s2">"D2"</span>,
        <span class="s2">"Options"</span>: <span class="o">{</span>
            <span class="s2">"device"</span>: <span class="s2">"/home/viethoang/petproject"</span>,
            <span class="s2">"o"</span>: <span class="s2">"bind"</span>,
            <span class="s2">"type"</span>: <span class="s2">"none"</span>
        <span class="o">}</span>,
        <span class="s2">"Scope"</span>: <span class="s2">"local"</span>
    <span class="o">}</span>
<span class="o">]</span>

</pre></table></code></div></div><ol><li>Creating a Container with a Volume Mapped to Local</ol><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">-it</span> <span class="nt">--name</span> C4 <span class="nt">-v</span> D2:/home/disk ubuntu
</pre></table></code></div></div><p>Container C4 is created from the ubuntu image with volume D2 assigned, and the volume is mapped to a folder on the host from the previous section</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>~ docker <span class="nb">exec</span> <span class="nt">-it</span>  C4 bash
root@976236084a9c:/# <span class="nb">ls</span> /home/disk/
20202  20203  Algorithm-application  DE  Non-Trivial-DE  aia  ktlt
root@976236084a9c:/# 
</pre></table></code></div></div><h1 id="iii-creating-and-managing-networks-in-docker">III. Creating and Managing Networks in Docker</h1><h2 id="some-concepts-and-default-networks">Some Concepts and Default Networks</h2><h3 id="concepts">Concepts</h3><p>Docker network ensures containers connect to the network:</p><ul><li>Containers on the same network can communicate with each other via name and port they listen on that network<li>Connect one or more hosts<li>Connect containers to other networks outside Docker<li>Connect between container clusters</ul><h3 id="default-network">Default Network</h3><p>There are 3 types of networks automatically created in Docker: <strong>bridge, none, host</strong>, we can view them with the command <code class="language-plaintext highlighter-rouge">docker network ls</code>.</p><p><strong>bridge</strong> is Docker’s default network driver. Bridge is the most suitable driver for independent container communication. Containers on the same network can communicate with each other via IP address. If no driver is specified, bridge will be the default network driver when initializing.</p><p><strong>none</strong> driver provides a container with its own networking stack and network space, often used with custom networks. This driver cannot be used in swarm clusters.</p><p><strong>host</strong> is used when a container needs to communicate with the host and directly use the network of the running server.</p><h2 id="creating-container-to-container-connections">Creating Container-to-Container Connections</h2><p>Try creating 2 containers on the same bridge network so the 2 containers can connect to each other:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> B1 busybox<span class="sb">`</span>
</pre></table></code></div></div><p>After creating, check if container B1 has appeared in the bridge network:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> docker network inspect bridge
</pre></table></code></div></div><p>Or check via container:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker inspect B1
</pre></table></code></div></div><p>Then create a similar container B2, check and try to ping from B1 to B2:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker attach B1
</pre></table></code></div></div><p>The above command will enter container B1 and use the terminal inside to ping.</p><h2 id="creating-connections-between-host-and-container">Creating Connections Between Host and Container</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">-it</span> <span class="nt">--name</span> B3 <span class="nt">-p</span> 8888:80 busybox
</pre></table></code></div></div><p>-p 8888:80 means mapping port 8888 on the host to port 80 on the container, meaning port 8888 on the host will display the content on port 80 of the container.</p><h2 id="creating-docker-networks">Creating Docker Networks</h2><p>The purpose is to create separate networks for containers to use separately from each other</p><p>1: Create network</p><p><code class="language-plaintext highlighter-rouge">docker network create --driver bridge network1</code></p><p>The above command creates network1, we check with the command <code class="language-plaintext highlighter-rouge">docker network ls</code>.</p><p>2: Delete network</p><p><code class="language-plaintext highlighter-rouge">docker network rm name_network</code></p><p>3: Create a container connected to a specified network</p><p><code class="language-plaintext highlighter-rouge">docker run -it --name B4 --network network1 busybox</code></p><p>4: Connect a running container to another network</p><p>For example: we have 2 networks: network1 and network2, and a container B5 is connected to network1, and we want this container to also connect to network2, then we run the command.</p><p><code class="language-plaintext highlighter-rouge">docker network connect network2 B5</code></p><p>The above command connects container B5 to network2</p><h1 id="iv-dockerfile-building-images-from-dockerfile">IV. Dockerfile, Building Images from Dockerfile</h1><h2 id="introduction-to-dockerfile">Introduction to Dockerfile</h2><p>Dockerfile is a text file that contains instructions for Docker to build images</p><p>Dockerfile = comments + command + arguments</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://openliberty.io/img/blog/blog_optimizing_spring_boot_layers.png" alt="" /></p><p>Docker images are created from multiple layers and by default it starts from a base layer. These layers are created from commands in the Dockerfile</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://www.simplilearn.com/ice9/free_resources_article_thumb/layer4.JPG" alt="" /></p><h2 id="how-to-write-dockerfile">How to Write Dockerfile</h2><h3 id="dockerfile-syntax">Dockerfile Syntax</h3><p>The general syntax of a Dockerfile has the form:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>INSTRUCTION arguments
</pre></table></code></div></div><ul><li><strong>INSTRUCTION</strong> is the name of directives in Dockerfile, each directive performs a specific task, as defined by Docker. When declaring these directives, they must be written in UPPERCASE.<li>A Dockerfile must start with the <strong>FROM</strong> directive to declare which image will be used as the base to build your image.<li><code class="language-plaintext highlighter-rouge">arguments</code> is the content part of the directives, determining what the directive will do.</ul><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>FROM alpine:3.4

RUN apk update <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apk add curl <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apk add git <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apk add vim
</pre></table></code></div></div><h3 id="main-directives-in-dockerfile">Main Directives in Dockerfile</h3><h4 id="from">FROM</h4><p>Specifies which image will be used as the base image for the build process to execute subsequent commands. These base images will be downloaded from Public Repository or Private Repository depending on setup.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>FROM &lt;image&gt; <span class="o">[</span>AS &lt;name&gt;]
FROM &lt;image&gt;[:&lt;tag&gt;] <span class="o">[</span>AS &lt;name&gt;]
FROM &lt;image&gt;[@&lt;digest&gt;] <span class="o">[</span>AS &lt;name&gt;]
</pre></table></code></div></div><p>The <strong>FROM</strong> directive is <strong>required</strong> and must be placed at the top of the Dockerfile.</p><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>FROM ubuntu
or
FROM ubuntu:latest
</pre></table></code></div></div><h4 id="label">LABEL</h4><p>The <strong>LABEL</strong> directive is used to add metadata to <strong>Docker Images</strong> when they are built. They exist as <em>key</em> - <em>value</em> pairs, stored as strings. You can specify multiple labels for a Docker Image, and of course each <em>key</em> - <em>value</em> pair must be unique. If the same <em>key</em> is declared with multiple values, the most recently declared value will overwrite the previous one.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>LABEL &lt;key&gt;<span class="o">=</span>&lt;value&gt; &lt;key&gt;<span class="o">=</span>&lt;value&gt; &lt;key&gt;<span class="o">=</span>&lt;value&gt; ... &lt;key&gt;<span class="o">=</span>&lt;value&gt; 
</pre></table></code></div></div><p>You can declare metadata for Images line by line or separate them into individual lines.</p><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>LABEL com.example.some-label<span class="o">=</span><span class="s2">"lorem"</span>
LABEL <span class="nv">version</span><span class="o">=</span><span class="s2">"2.0"</span> <span class="nv">description</span><span class="o">=</span><span class="s2">"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</span>
</pre></table></code></div></div><p>To view metadata of a Docker Image, use the command line:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker inspect &lt;image <span class="nb">id</span><span class="o">&gt;</span>
</pre></table></code></div></div><p><strong>Example:</strong></p><h4 id="maintainer">MAINTAINER</h4><p>The <strong>MAINTAINER</strong> directive is used to declare author information of the person who wrote the Dockerfile.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>MAINTAINER &lt;name&gt; <span class="o">[</span>&lt;email&gt;]
</pre></table></code></div></div><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>MAINTAINER NamDH &lt;namduong3699@gmail.com&gt;
</pre></table></code></div></div><p>Currently, according to official documentation from <a href="https://docs.docker.com/engine/reference/builder/#maintainer-deprecated">Docker</a>, declaring <strong>MAINTAINER</strong> is gradually being replaced by <strong>LABEL maintainer</strong> due to its flexibility when in addition to author name and email information, we can add many other optional information through metadata tags and can easily retrieve information with the <code class="language-plaintext highlighter-rouge">docker inspect ...</code> command.</p><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>LABEL <span class="nv">maintainer</span><span class="o">=</span><span class="s2">"namduong3699@gmail.com"</span>
</pre></table></code></div></div><h4 id="run">RUN</h4><p>The <strong>RUN</strong> directive is used to run a command during the image build process and is usually Linux commands. Depending on the base image declared in the <strong>FROM</strong> section, there will be corresponding commands. For example, to run an update command for Ubuntu it would be <code class="language-plaintext highlighter-rouge">RUN apt-get update -y</code> while for CentOS it would be <code class="language-plaintext highlighter-rouge">Run yum update -y</code>. The command result will be committed, and that commit result will be used in the next step of the Dockerfile.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>RUN &lt;<span class="nb">command</span><span class="o">&gt;</span>
RUN <span class="o">[</span><span class="s2">"executable"</span>, <span class="s2">"param1"</span>, <span class="s2">"param2"</span><span class="o">]</span>
</pre></table></code></div></div><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>RUN /bin/bash <span class="nt">-c</span> <span class="s1">'source $HOME/.bashrc; echo $HOME'</span>
<span class="nt">--------</span> or <span class="nt">--------</span>
RUN <span class="o">[</span><span class="s2">"/bin/bash"</span>, <span class="s2">"-c"</span>, <span class="s2">"echo hello"</span><span class="o">]</span>
</pre></table></code></div></div><p>In <code class="language-plaintext highlighter-rouge">shell form</code>, you can execute multiple commands at once with the <code class="language-plaintext highlighter-rouge">\</code> character:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>FROM ubuntu
RUN apt-get update
RUN apt-get <span class="nb">install </span>curl <span class="nt">-y</span>
</pre></table></code></div></div><p>or</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>FROM ubuntu
RUN apt-get update<span class="p">;</span> <span class="se">\</span>
    apt-get <span class="nb">install </span>curl <span class="nt">-y</span>
</pre></table></code></div></div><h4 id="add">ADD</h4><p>The <strong>ADD</strong> directive will copy files and directories from the build machine or remote file URLs from <code class="language-plaintext highlighter-rouge">src</code> and add them to the image filesystem <code class="language-plaintext highlighter-rouge">dest</code>.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>ADD <span class="o">[</span><span class="nt">--chown</span><span class="o">=</span>&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;
ADD <span class="o">[</span><span class="nt">--chown</span><span class="o">=</span>&lt;user&gt;:&lt;group&gt;] <span class="o">[</span><span class="s2">"&lt;src&gt;"</span>,... <span class="s2">"&lt;dest&gt;"</span><span class="o">]</span>
</pre></table></code></div></div><p>Where:</p><ul><li><strong>src</strong> can declare multiple files, directories, …<li><strong>dest</strong> must be an absolute path or relative to WORKDIR directive.</ul><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>ADD hom<span class="k">*</span> /mydir/
ADD hom?.txt /mydir/
ADD test.txt relativeDir/
</pre></table></code></div></div><p>You can also set permissions on newly copied files/directories:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>ADD <span class="nt">--chown</span><span class="o">=</span>55:mygroup files<span class="k">*</span> /somedir/
ADD <span class="nt">--chown</span><span class="o">=</span>bin files<span class="k">*</span> /somedir/
ADD <span class="nt">--chown</span><span class="o">=</span>1 files<span class="k">*</span> /somedir/
ADD <span class="nt">--chown</span><span class="o">=</span>10:11 files<span class="k">*</span> /somedir/
</pre></table></code></div></div><h4 id="copy">COPY</h4><p>The <strong>COPY</strong> directive is similar to <strong>ADD</strong> in copying files and directories from <code class="language-plaintext highlighter-rouge">&lt;src&gt;</code> and adding them to <code class="language-plaintext highlighter-rouge">&lt;dest&gt;</code> of the container. Unlike <strong>ADD</strong>, it does not support adding remote file URLs from network sources.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>COPY <span class="o">[</span><span class="nt">--chown</span><span class="o">=</span>&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;
COPY <span class="o">[</span><span class="nt">--chown</span><span class="o">=</span>&lt;user&gt;:&lt;group&gt;] <span class="o">[</span><span class="s2">"&lt;src&gt;"</span>,... <span class="s2">"&lt;dest&gt;"</span><span class="o">]</span>
</pre></table></code></div></div><h4 id="env">ENV</h4><p>The <strong>ENV</strong> directive is used to declare environment variables. These variables are declared as <em>key</em> - <em>value</em> pairs as strings. The values of these variables will be available for subsequent directives of the Dockerfile.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ENV &lt;key&gt;<span class="o">=</span>&lt;value&gt; ...
</pre></table></code></div></div><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>ENV <span class="nv">DOMAIN</span><span class="o">=</span><span class="s2">"viblo.asia"</span>
ENV <span class="nv">PORT</span><span class="o">=</span>80
ENV <span class="nv">USERNAME</span><span class="o">=</span><span class="s2">"namdh"</span> <span class="nv">PASSWORD</span><span class="o">=</span><span class="s2">"secret"</span>
</pre></table></code></div></div><p>You can also change environment variable values with the container startup command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker run <span class="nt">--env</span> &lt;key&gt;<span class="o">=</span>&lt;value&gt;
</pre></table></code></div></div><p><strong>ENV</strong> is only used in the following commands:</p><ul><li>ADD<li>COPY<li>ENV<li>EXPOSE<li>FROM<li>LABEL<li>STOPSIGNAL<li>USER<li>VOLUME<li>WORKDIR</ul><h4 id="cmd">CMD</h4><p>The <strong>CMD</strong> directive defines commands that will be run after the container is started from the built image. Multiple can be declared but only the last <strong>CMD</strong> will run.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>CMD <span class="o">[</span><span class="s2">"executable"</span>,<span class="s2">"param1"</span>,<span class="s2">"param2"</span><span class="o">]</span>
CMD <span class="o">[</span><span class="s2">"param1"</span>,<span class="s2">"param2"</span><span class="o">]</span> 
CMD <span class="nb">command </span>param1 param2
</pre></table></code></div></div><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>FROM ubuntu
CMD <span class="nb">echo </span>Viblo
</pre></table></code></div></div><h4 id="user">USER</h4><p>Used to set <code class="language-plaintext highlighter-rouge">username</code> or <code class="language-plaintext highlighter-rouge">UID</code> to use when running the image and when running commands in <code class="language-plaintext highlighter-rouge">RUN</code>, <code class="language-plaintext highlighter-rouge">CMD</code>, <code class="language-plaintext highlighter-rouge">ENTRYPOINT</code> after it.</p><p><strong>Syntax:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>USER &lt;user&gt;[:&lt;group&gt;]
or
USER &lt;UID&gt;[:&lt;GID&gt;]
</pre></table></code></div></div><p><strong>Example:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>FROM alpine:3.4
RUN useradd <span class="nt">-ms</span> /bin/bash namdh
USER namdh
</pre></table></code></div></div><h4 id="creating-images-with-dockerfile">Creating Images with Dockerfile</h4><p>Above I’ve covered the structure and main directives of a Dockerfile. Now we will practice building an image by writing a simple Dockerfile. Note that before starting, make sure your machine has <strong>Docker</strong> installed. If not, you can refer to the installation guide <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04">here</a>.</p><h3 id="creating-dockerfile">Creating Dockerfile</h3><h4 id="example-1">Example 1</h4><p>At this step, we will create a new path for the Dockerfile.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">mkdir </span>myproject <span class="o">&amp;&amp;</span> <span class="nb">cd </span>myproject
</pre></table></code></div></div><p>Next is creating the Dockerfile. Note that the name of <code class="language-plaintext highlighter-rouge">Dockerfile</code> must be exactly “Dockerfile” and there is no file extension for this file type. If not named correctly, when building, the system will report an error that the file cannot be found.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">touch </span>Dockerfile
</pre></table></code></div></div><p>After creating the Dockerfile, we enter the directives:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>FROM alpine
CMD <span class="o">[</span><span class="s2">"echo"</span>, <span class="s2">"Hello world!"</span><span class="o">]</span>
</pre></table></code></div></div><p>As you can see, the Dockerfile content above only contains 2 directives: <strong>FROM</strong> and <strong>CMD</strong>. CMD contains the <code class="language-plaintext highlighter-rouge">echo</code> command and will print “Hello world!” to the screen when the container is started from the image built from this Dockerfile. We proceed to create the image with the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>docker build <span class="nt">-t</span> &lt;image name&gt; <span class="nb">.</span>
</pre></table></code></div></div><p>Finally, we run the <code class="language-plaintext highlighter-rouge">docker run &lt;imageID&gt;</code> command to create and run the container. The result will be the text “Hello world!” printed on the screen.</p><h1 id="v-docker-compose">V. Docker-compose</h1><h2 id="concepts-1">Concepts</h2><p>It is a tool that helps us set up and manage multiple containers, networks, volumes (collectively called services) and configure services quickly and simply by running according to specifications in the docker-compose.yml file</p><h3 id="main-functions">Main Functions</h3><ul><li>Create and manage multiple independent environments on a host machine, ensuring independent memory partitions to avoid conflicts<li>Only recreate changed containers, recognize unchanged containers and reuse them<li>Define and use environment variables in YAML file</ul><h3 id="docker-composeyml">Docker-compose.yml</h3><p>It is a file stored in <a href="https://en.wikipedia.org/wiki/YAML">YAML format</a>. This file stores directives for docker compose to read and execute those directives, such as creating containers from images, creating networks, configuring services.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>version: "3.9"  # optional since v1.27.0
services:
  web:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - .:/code
      - logvolume01:/var/log
    links:
      - redis
  redis:
    image: redis
volumes:
  logvolume01: {}
</pre></table></code></div></div><h2 id="docker-compose-practice">Docker-compose Practice</h2><p>Our practice task is to define a docker file to create the following components</p><ul><li>MySQL Container<li>HTTP APACHE Container<li>PHP-FPM Container<li>Network (bridge) for the above services to connect to this network<li>Map port 9999 of the host machine to port 80 of the HTTP server</ul><h3 id="creating-docker-composeyml">Creating docker-compose.yml</h3><p>Create a mycode folder inside and create a docker-compose.yml file with the following content (I have comments explaining in the file content).</p><div class="language-yml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre><td class="rouge-code"><pre><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span> <span class="c1"># is the docker composer version</span>

<span class="c1">#Create a network named my-network</span>
<span class="na">networks</span><span class="pi">:</span>
    <span class="na">my-network</span><span class="pi">:</span>
        <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>

<span class="c1"># Create services (containers)</span>
<span class="na">services</span><span class="pi">:</span>

    <span class="c1">#Create container my-php from image php:latest connected to network my-network</span>
    <span class="na">my-php</span><span class="pi">:</span>
        <span class="na">container_name</span><span class="pi">:</span> <span class="s">php-product</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s1">'</span><span class="s">php:latest'</span>
        <span class="na">hostname</span><span class="pi">:</span> <span class="s">php</span>
        <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
        <span class="na">networks</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">my-network</span>

    <span class="c1">#Create container my-httpd from image httpd:latest connected to network my-network, map port 9999 of host to port 80</span>
    <span class="na">my-httpd</span><span class="pi">:</span>
        <span class="na">container_name</span><span class="pi">:</span> <span class="s">c-httpd01</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s1">'</span><span class="s">httpd:latest'</span>
        <span class="na">hostname</span><span class="pi">:</span> <span class="s">httpd</span>
        <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
        <span class="na">networks</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">my-network</span>
        <span class="na">ports</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">9999:80"</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">443:443"</span>
            
     <span class="c1">#Create container my-mysql from image mysql:latest connected to network my-network, config environment variables</span>
    <span class="na">my-mysql</span><span class="pi">:</span>
        <span class="na">container_name</span><span class="pi">:</span> <span class="s">myql-product</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">mysql:latest"</span>
        <span class="na">hostname</span><span class="pi">:</span> <span class="s">mysql</span>
        <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
        <span class="na">networks</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">my-network</span>
        <span class="na">environment</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">MYSQL_ROOT_PASSWORD=123abc</span>
            <span class="pi">-</span> <span class="s">MYSQL_DATABASE=db_site</span>
            <span class="pi">-</span> <span class="s">MYSQL_USER=sites</span>
            <span class="pi">-</span> <span class="s">MYSQL_PASSWORD=123abc</span>
</pre></table></code></div></div><p>The above file is divided into 3 parts</p><ul><li><p>The first part is declaring the docker composer version, here I use version 3</p><li>The next part is declaring network creation, here I create a network named my-network with network type bridge<li><p>The next part is creating services, here creating 3 services which are 3 containers (php, httpd, mysql), these services all connect to the my-network network created in part 2</p><ul><li>Container my-php created from image php:latest connected to network my-network<li>Container my-httpd created from image httpd:latest connected to network my-network, maps port 9999 of host to port 80 and port 443 to 443 of host<li>Container my-mysql created from image mysql:latest connected to network my-network, config environment variables like MYSQL_ROOT_PASSWORD, MYSQL_DATABASE, MYSQL_USER, MYSQL_PASSWORD</ul></ul><h3 id="running-docker-composeyml-to-create-services">Running docker-compose.yml to Create Services</h3><p>After creating the docker compose file, we will run this file to create the defined services.</p><p>Go to the folder containing the docker-compose.yml file and run the command</p><p><code class="language-plaintext highlighter-rouge">docker-compose up</code></p><p>To stop running services, use the command</p><p><code class="language-plaintext highlighter-rouge">docker-compose stop</code></p><p>To end running services and completely delete containers, use the command</p><p><code class="language-plaintext highlighter-rouge">docker-compose down</code></p><p>Monitoring Logs of Services</p><p><code class="language-plaintext highlighter-rouge">docker-compose logs [SERVICES]</code></p><h1 id="vi-docker-swarm">VI. Docker swarm</h1><h1 id="vii-references">VII. References</h1><p>Other reference sources:</p><p><a href="https://viblo.asia/p/tim-hieu-ve-dockerfile-va-tao-docker-image-V3m5WWag5O7#_cu-phap-cua-mot-dockerfile-1">Understanding Dockerfile and Creating Docker Image</a></p><p><a href="https://www.youtube.com/watch?v=tb4eDxdJscg&amp;ab_channel=Simplilearn">Dockerfile tutorial</a></p><p><a href="https://devopswithdocker.com/">Devops with Docker</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/en/categories/blogging/'>Blogging</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/en/tags/docker/" class="post-tag no-text-decoration" >Docker</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Docker Basics and Practice - De Manejar&url=https://demanejar.github.io/en/posts/Docker/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Docker Basics and Practice - De Manejar&u=https://demanejar.github.io/en/posts/Docker/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Docker Basics and Practice - De Manejar&url=https://demanejar.github.io/en/posts/Docker/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/en/posts/redis-101-(part-1)/">Redis 101 (Part I)</a><li><a href="/en/posts/Kafka-In-Depth/">Kafka In Depth</a><li><a href="/en/posts/Apache-Nifi/">Understanding Apache Nifi</a><li><a href="/en/posts/Docker/">Docker Basics and Practice</a><li><a href="/en/posts/hadoop-question/">Summary of questions about Apache Hadoop</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/en/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/en/tags/crawler/">Crawler</a> <a class="post-tag" href="/en/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/en/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/en/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/en/tags/hdfs/">HDFS</a> <a class="post-tag" href="/en/tags/alonhadat/">alonhadat</a> <a class="post-tag" href="/en/tags/hadoop-yarn/">Hadoop Yarn</a> <a class="post-tag" href="/en/tags/selenium/">Selenium</a> <a class="post-tag" href="/en/tags/data-ingestion/">Data Ingestion</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/en/posts/airflow-ha/"><div class="card-body"> <span class="timeago small" > Feb 18, 2024 <i class="unloaded">2024-02-18T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Airflow HA Guide</h3><div class="text-muted small"><p> In this article, I will guide installing Airflow and setting up HA for it. The environment used is VirtualBox virtual machines. Create 2 virtual machines with fixed addresses, add user and gran...</p></div></div></a></div><div class="card"> <a href="/en/posts/data-lineage-tracking-and-visualization-solution-with-spline/"><div class="card-body"> <span class="timeago small" > Mar 14, 2024 <i class="unloaded">2024-03-14T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spline | Data Lineage Tracking And Visualization Solution</h3><div class="text-muted small"><p> Spline is an OpenSource tool that allows automatic tracking of Data Lineage and Data Pipeline Structure. Its most common use is tracking and visualizing Data Lineage for Spark. Spline Overview Sp...</p></div></div></a></div><div class="card"> <a href="/en/posts/redis-101-(part-1)/"><div class="card-body"> <span class="timeago small" > Jun 10, 2021 <i class="unloaded">2021-06-10T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Redis 101 (Part I)</h3><div class="text-muted small"><p> Overview During my studies in Big Data Storage and Processing at school, I learned about Redis. This is a NoSQL database. Unlike other databases, this is an in-memory storage type with key-value s...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/en/posts/Apache-Nifi/" class="btn btn-outline-primary" prompt="Older"><p>Understanding Apache Nifi</p></a> <a href="/en/posts/hadoop-mapreduce-and-wordcount-project/" class="btn btn-outline-primary" prompt="Newer"><p>Hadoop MapReduce and basic WordCount program with MapReduce</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2026 <a href="https://twitter.com/DeManejar">demanejar</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div><script type="text/javascript"> var links = document.links; for (var i = 0, linksLength = links.length; i < linksLength; i++) { if (links[i].hostname != window.location.hostname) { links[i].target = '_blank'; } } </script></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/en/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/en/tags/crawler/">Crawler</a> <a class="post-tag" href="/en/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/en/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/en/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/en/tags/hdfs/">HDFS</a> <a class="post-tag" href="/en/tags/alonhadat/">alonhadat</a> <a class="post-tag" href="/en/tags/hadoop-yarn/">Hadoop Yarn</a> <a class="post-tag" href="/en/tags/selenium/">Selenium</a> <a class="post-tag" href="/en/tags/data-ingestion/">Data Ingestion</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/en/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://demanejar.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
