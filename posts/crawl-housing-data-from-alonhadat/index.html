<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:image" content="https://raw.githubusercontent.com/demanejar/image-collection/main/crawldataalonhadata/img_603b96633d2d0.png"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9TR0K3B846"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8714452693053438" crossorigin="anonymous"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9TR0K3B846'); </script><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Crawl Housing Data from Alonhadat with Scrapy" /><meta name="author" content="trannguyenhan" /><meta property="og:locale" content="en_US" /><meta name="description" content="In this article, I will introduce in detail how to create a project with Scrapy and use it to analyze and extract housing data from the Alonhadat website. If your machine doesn’t have Scrapy yet, you can install it with pip. See details at https://pypi.org/project/Scrapy/." /><meta property="og:description" content="In this article, I will introduce in detail how to create a project with Scrapy and use it to analyze and extract housing data from the Alonhadat website. If your machine doesn’t have Scrapy yet, you can install it with pip. See details at https://pypi.org/project/Scrapy/." /><link rel="canonical" href="https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/" /><meta property="og:url" content="https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/" /><meta property="og:site_name" content="De Manejar" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-24T20:52:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Crawl Housing Data from Alonhadat with Scrapy" /><meta name="twitter:site" content="@DeManejar" /><meta name="twitter:creator" content="@trannguyenhan" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"trannguyenhan"},"dateModified":"2023-01-24T20:52:00+07:00","datePublished":"2023-01-24T20:52:00+07:00","description":"In this article, I will introduce in detail how to create a project with Scrapy and use it to analyze and extract housing data from the Alonhadat website. If your machine doesn’t have Scrapy yet, you can install it with pip. See details at https://pypi.org/project/Scrapy/.","headline":"Crawl Housing Data from Alonhadat with Scrapy","mainEntityOfPage":{"@type":"WebPage","@id":"https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/"},"url":"https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/"}</script><title>Crawl Housing Data from Alonhadat with Scrapy | De Manejar</title><link rel="shortcut icon" href="/en/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/en/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/en/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/en/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/en/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/en/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/en/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/en/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/en/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/en/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/en/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/en/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/en/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/en/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/en/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/en/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/en/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/en/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/en/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/en/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/en/" alt="avatar" class="mx-auto"> <img src="https://i.pinimg.com/564x/9c/32/79/9c3279b5ac960533cbcb7e833ac4d947.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/en/">De Manejar</a></div><div class="site-subtitle font-italic">Hello Bigdata !</div></div><ul class="w-100"><li class="nav-item"> <a href="/en/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/en/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/en/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/en/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/en/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/demanejar" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/DeManejar" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['demanejar','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/en/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/en/"> Posts </a> </span> <span>Crawl Housing Data from Alonhadat with Scrapy</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Crawl Housing Data from Alonhadat with Scrapy</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> trannguyenhan </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jan 24, 2023, 8:52 PM +0700" prep="on" > Jan 24, 2023 <i class="unloaded">2023-01-24T20:52:00+07:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1449 words">8 min</span></div></div><div class="post-content"><p>In this article, I will introduce in detail how to create a project with <code class="language-plaintext highlighter-rouge">Scrapy</code> and use it to analyze and extract housing data from the Alonhadat website. If your machine doesn’t have <code class="language-plaintext highlighter-rouge">Scrapy</code> yet, you can install it with pip. See details at <a href="https://pypi.org/project/Scrapy/">https://pypi.org/project/Scrapy/</a>.</p><blockquote><p>If you’re interested in a complete data flow from <code class="language-plaintext highlighter-rouge">crawl data</code> -&gt; <code class="language-plaintext highlighter-rouge">cleaning</code> -&gt; <code class="language-plaintext highlighter-rouge">analysis and visualization</code> -&gt; <code class="language-plaintext highlighter-rouge">machine learning</code> -&gt; <code class="language-plaintext highlighter-rouge">demo website</code>, you can refer to the repo <a href="https://github.com/trannguyenhan/house-price-prediction">https://github.com/trannguyenhan/house-price-prediction</a></p></blockquote><h2 id="creating-a-scrapy-project">Creating a Scrapy Project</h2><p>Create a Scrapy project with the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy startproject crawlerdata
</pre></table></code></div></div><p>Create an <code class="language-plaintext highlighter-rouge">alonhadat</code> spider with the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy genspider alonhadat alonhadat.com.vn
</pre></table></code></div></div><h2 id="defining-data-to-extract">Defining Data to Extract</h2><p>Define the fields to extract clearly in the <code class="language-plaintext highlighter-rouge">items.py</code> file:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">scrapy</span>


<span class="k">class</span> <span class="nc">DataPriceItem</span><span class="p">(</span><span class="n">scrapy</span><span class="p">.</span><span class="n">Item</span><span class="p">):</span>
    <span class="c1"># define the fields for your item here like:
</span>    <span class="c1"># name = scrapy.Field()
</span>    <span class="n">area</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># dien_tich \ double
</span>    <span class="n">address</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># dia_chi \ string
</span>    <span class="n">description</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># mo_ta \ string
</span>    <span class="n">floor_number</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># so_lau (so_tang) \ int
</span>    <span class="n">bedroom_number</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># so_phong_ngu \ int
</span>    <span class="n">is_dinning_room</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_phong_an? \ boolean
</span>    <span class="n">is_kitchen</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_bep? \ boolean
</span>    <span class="n">is_terrace</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_san_thuong? \ boolean
</span>    <span class="n">is_car_pack</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># co_cho_de_xe_hoi? \ boolean
</span>    <span class="n">is_owner</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chinh_chu? \ boolean
</span>    <span class="n">start_date</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># ngay_dang_tin \ date || string
</span>    <span class="n">end_date</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># ngay_ket_thuc \ date || string
</span>    <span class="nb">type</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># in('nha_mat_tien', 'nha_trong_hem') \ string
</span>    <span class="n">direction</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># phuong_huong_nha (nam, bac, dong, tay) \ string
</span>    <span class="n">street_in_front_of_house</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># do_rong_duong_truoc_nha \ int
</span>    <span class="n">width</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chieu_dai \ string
</span>    <span class="n">height</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># chieu_rong \ string
</span>    <span class="n">law</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># phap_ly \ string
</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Field</span><span class="p">()</span>  <span class="c1"># gia_nha \ double
</span></pre></table></code></div></div><p>Since crawling data is only the first step in our entire data flow, we need commands to clearly record the fields to avoid confusion later and also to make it easier to understand and approach the project when looking back later.</p><p>For this simple first project, we don’t need to worry about <code class="language-plaintext highlighter-rouge">middlewares.py</code> or <code class="language-plaintext highlighter-rouge">pipelines.py</code> files yet. Code in these files is temporarily left as default.</p><h2 id="editing-the-settingspy-file">Editing the <code class="language-plaintext highlighter-rouge">settings.py</code> File</h2><p>Edit the <code class="language-plaintext highlighter-rouge">settings.py</code> file:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">BOT_NAME</span> <span class="o">=</span> <span class="sh">'</span><span class="s">data_price</span><span class="sh">'</span>

<span class="n">SPIDER_MODULES</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">data_price.spiders</span><span class="sh">'</span><span class="p">]</span>
<span class="n">NEWSPIDER_MODULE</span> <span class="o">=</span> <span class="sh">'</span><span class="s">data_price.spiders</span><span class="sh">'</span>

<span class="c1"># Obey robots.txt rules
</span><span class="n">ROBOTSTXT_OBEY</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">DEFAULT_REQUEST_HEADERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">'</span><span class="s">User-Agent</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mozilla/5.0 (X11; Linux x86_64; rv:48.0) Gecko/20100101 Firefox/48.0</span><span class="sh">'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">FEED_EXPORT_ENCODING</span> <span class="o">=</span> <span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span>
</pre></table></code></div></div><p>If your newly created <code class="language-plaintext highlighter-rouge">Scrapy</code> program has the variable <code class="language-plaintext highlighter-rouge">ROBOTSTXT = False</code>, please set it to <code class="language-plaintext highlighter-rouge">True</code>. For specific reasons, you can review my previous article <a href="https://demanejar.github.io/posts/what-is-crawler-and-something/#s%E1%BB%AD-d%E1%BB%A5ng-file-robotstxt">https://demanejar.github.io/posts/what-is-crawler-and-something/#s%E1%BB%AD-d%E1%BB%A5ng-file-robotstxt</a></p><h2 id="writing-spider-to-analyze-website-html">Writing Spider to Analyze Website HTML</h2><p>In <code class="language-plaintext highlighter-rouge">AlonhadatSpider</code>, we will need to write 3 functions: <code class="language-plaintext highlighter-rouge">start_requests</code>, <code class="language-plaintext highlighter-rouge">parse_link</code>, <code class="language-plaintext highlighter-rouge">parse</code>.</p><h3 id="start_requests-function"><code class="language-plaintext highlighter-rouge">start_requests</code> Function</h3><p>This function will be run first and will be responsible for initializing the links to crawl. This is a bit hard to understand, let me give an example. For example, you need to crawl the <code class="language-plaintext highlighter-rouge">alonhadat</code> website from page 3501 to page 4501, then first you need to analyze how the URLs of this website are designed. Go to the website and check a few pages:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>https://alonhadat.com.vn/nha-dat/can-ban.html
https://alonhadat.com.vn/nha-dat/can-ban/trang--2.html
https://alonhadat.com.vn/nha-dat/can-ban/trang--3.html
</pre></table></code></div></div><p>From the above, we can temporarily conclude that the URLs of this website between pages 1, 2 are in the form <code class="language-plaintext highlighter-rouge">../trang--i.html</code>. Based on that assumption, we write the <code class="language-plaintext highlighter-rouge">start_requests</code> function:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">start_requests</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">3501</span><span class="p">,</span><span class="mi">4501</span><span class="p">):</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://alonhadat.com.vn/can-ban-nha/trang--{}.htm</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">pages</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">page</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">parse_link</span><span class="p">)</span>
</pre></table></code></div></div><p>So we’ve finished initializing the links to crawl. Now each created link will be input for the <code class="language-plaintext highlighter-rouge">parse_link</code> function.</p><h3 id="parse_link-function"><code class="language-plaintext highlighter-rouge">parse_link</code> Function</h3><p>The task of this function is to get all article links in each listing page created in the <code class="language-plaintext highlighter-rouge">start_requests</code> function. For example, when entering a listing page like the following:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/main/scrapy-first/alonhadat.png" alt="" /></p><p>The result we need to achieve is a list of those article links:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="p">[</span>
  <span class="sh">'</span><span class="s">https://alonhadat.com.vn/cho-thue-nha-o-duong-nguyen-van-bua-xa-xuan-thoi-son-huyen-hm-12662015.html</span><span class="sh">'</span><span class="p">,</span>
  <span class="sh">'</span><span class="s">https://alonhadat.com.vn/cho-thue-khach-san-8-tang-30phong-mt-khu-pham-van-dong-12682000.html</span><span class="sh">'</span><span class="p">,</span>
  <span class="bp">...</span>
<span class="p">]</span>
</pre></table></code></div></div><p>Right-click on the <code class="language-plaintext highlighter-rouge">element</code> you need to get <code class="language-plaintext highlighter-rouge">xpath</code> or <code class="language-plaintext highlighter-rouge">css selector</code> (with <code class="language-plaintext highlighter-rouge">xpath</code> or <code class="language-plaintext highlighter-rouge">css selector</code>, they’re the same. I prefer using <code class="language-plaintext highlighter-rouge">css selector</code>, so from now on I will mainly mention <code class="language-plaintext highlighter-rouge">css selector</code>) to get the <code class="language-plaintext highlighter-rouge">css selector</code> of the element:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/demanejar/image-collection/main/scrapy-first/get_xpath_or_css_selector.png" alt="" /></p><p>In this case, the <code class="language-plaintext highlighter-rouge">css selector</code> of the element containing the first article URL is (it’s an <code class="language-plaintext highlighter-rouge">a</code> tag element):</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a
</pre></table></code></div></div><p>In <code class="language-plaintext highlighter-rouge">Scrapy</code>, to get additional attributes, we add <code class="language-plaintext highlighter-rouge">::attr(href)</code> where <code class="language-plaintext highlighter-rouge">href</code> is the attribute of that element. So to get the URL contained in the <code class="language-plaintext highlighter-rouge">href</code> attribute of the <code class="language-plaintext highlighter-rouge">a</code> tag, the <code class="language-plaintext highlighter-rouge">css selector</code> will be added as follows:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
</pre></table></code></div></div><blockquote><p><strong>Note</strong>: I also note here about getting <code class="language-plaintext highlighter-rouge">CSS SELECTOR</code> this way. First, it’s very easy to change. Next, getting it this way, you will only get it for one element you need to extract. In later articles, I will guide everyone on how to get the <code class="language-plaintext highlighter-rouge">css selector</code> of each element by analyzing the unique attributes of that element or adjacent elements. For this article, we’ll continue with this method.</p></blockquote><p>This is only the <code class="language-plaintext highlighter-rouge">css selector</code> of the first article URL. For subsequent article URLs, we do the same and we’ll have a list of <code class="language-plaintext highlighter-rouge">css selector</code> containing article URLs as follows:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>#left &gt; div.content-items &gt; div:nth-child(1) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(2) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(3) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
#left &gt; div.content-items &gt; div:nth-child(4) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)
</pre></table></code></div></div><p>Based on the predicted structure of the <code class="language-plaintext highlighter-rouge">css selector</code> containing article links, we’ll write the <code class="language-plaintext highlighter-rouge">parse_link</code> function as follows:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">parse_link</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span>
        <span class="nb">str</span> <span class="o">=</span> <span class="sh">'</span><span class="s">#left &gt; div.content-items &gt; div:nth-child({}) &gt; div:nth-child(1) &gt; div.ct_title &gt; a::attr(href)</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">link</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="nb">str</span><span class="p">).</span><span class="nf">extract_first</span><span class="p">()</span>
        <span class="n">link</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://alonhadat.com.vn/</span><span class="sh">'</span> <span class="o">+</span> <span class="n">link</span>

        <span class="k">yield</span> <span class="n">scrapy</span><span class="p">.</span><span class="nc">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">self</span><span class="p">.</span><span class="n">parse</span><span class="p">)</span>
</pre></table></code></div></div><p>Why is it <code class="language-plaintext highlighter-rouge">range(1, 21)</code>? Based on analyzing the website, we can see that a listing page will have 21 articles. Now each article URL will be input for the <code class="language-plaintext highlighter-rouge">parse</code> function. The next task is to analyze and extract the necessary data defined in the <code class="language-plaintext highlighter-rouge">Item</code> class.</p><h3 id="parse-function"><code class="language-plaintext highlighter-rouge">parse</code> Function</h3><p>With the way of getting <code class="language-plaintext highlighter-rouge">css selector</code> as above, we can quickly write the <code class="language-plaintext highlighter-rouge">parse</code> function as follows:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nc">DataPriceItem</span><span class="p">()</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">price</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.moreinfor &gt; span.price &gt; span.value</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">description</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.detail.text-content</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">address</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.address &gt; span.value</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">area</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.moreinfor &gt; span.square &gt; span.value</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">start_date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="sh">'</span><span class="s">#left &gt; div.property &gt; div.title &gt; span</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">start_date</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">end_date</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="n">result_table</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">extract_table</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="sh">'</span><span class="s">table</span><span class="sh">'</span><span class="p">).</span><span class="nf">get</span><span class="p">())</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">floor_number</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">bedroom_number</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_dinning_room</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_kitchen</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_terrace</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_car_pack</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">is_owner</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">type</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">direction</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">street_in_front_of_house</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">width</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">height</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
    <span class="n">item</span><span class="p">[</span><span class="sh">'</span><span class="s">law</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_table</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>

    <span class="k">yield</span> <span class="n">item</span>
</pre></table></code></div></div><p>In this function, we must declare a <code class="language-plaintext highlighter-rouge">DataPriceItem</code> and return that object so the <code class="language-plaintext highlighter-rouge">Scrapy</code> flow can run smoothly. The <code class="language-plaintext highlighter-rouge">extract</code> or <code class="language-plaintext highlighter-rouge">extract_table</code> functions are additional functions written to reuse code.</p><p>To see the detailed code of the project, you can view it at the Demanejar project repo: <a href="https://github.com/demanejar/crawl-alonhadat">https://github.com/demanejar/crawl-alonhadat</a>.</p><p>In the project, I also use the <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> library to analyze HTML code (used in the <code class="language-plaintext highlighter-rouge">extract_table</code> function, you can go to the repo on GitHub to see details). <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> is also a quite famous library for extracting and analyzing information from websites. However, for me, <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> is stronger in analyzing HTML code, and I also often use <code class="language-plaintext highlighter-rouge">BeautifulSoup</code> in <code class="language-plaintext highlighter-rouge">Scrapy</code> to analyze some HTML code segments.</p><h2 id="running-scrapy">Running Scrapy</h2><p>Finally, after writing everything, run the project to extract data. Run the command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scrapy crawl alonhadat <span class="nt">-o</span> ../data/output.json <span class="nt">--set</span> <span class="nv">FEED_EXPORT_ENCODING</span><span class="o">=</span>utf-8
</pre></table></code></div></div><p>Raw crawled data you can refer to at: <a href="https://github.com/trannguyenhan/house-price-prediction/tree/master/data">https://github.com/trannguyenhan/house-price-prediction/tree/master/data</a>.</p><p>Currently, <code class="language-plaintext highlighter-rouge">alonhadat</code> has some measures to avoid being crawled. In this article, I haven’t mentioned how to bypass this blocking by <code class="language-plaintext highlighter-rouge">alonhadat</code>. I will mention more in later articles in this series. This article is just about how to analyze and extract data from the website. For the repos mentioned in the article, if you find them useful, please give the repos a star. Thank you everyone! I’ll end this article here.</p><p>Since the website doesn’t have a comment section under articles, everyone can discuss and give feedback to me at this GITHUB DISCUSSION: <a href="https://github.com/orgs/demanejar/discussions/1">https://github.com/orgs/demanejar/discussions/1</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/en/categories/crawler/'>Crawler</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/en/tags/crawler/" class="post-tag no-text-decoration" >Crawler</a> <a href="/en/tags/scrapy/" class="post-tag no-text-decoration" >Scrapy</a> <a href="/en/tags/alonhadat/" class="post-tag no-text-decoration" >alonhadat</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Crawl Housing Data from Alonhadat with Scrapy - De Manejar&url=https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Crawl Housing Data from Alonhadat with Scrapy - De Manejar&u=https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Crawl Housing Data from Alonhadat with Scrapy - De Manejar&url=https://demanejar.github.io/en/posts/crawl-housing-data-from-alonhadat/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/en/posts/redis-101-(part-1)/">Redis 101 (Part I)</a><li><a href="/en/posts/Kafka-In-Depth/">Kafka In Depth</a><li><a href="/en/posts/Apache-Nifi/">Understanding Apache Nifi</a><li><a href="/en/posts/Docker/">Docker Basics and Practice</a><li><a href="/en/posts/hadoop-question/">Summary of questions about Apache Hadoop</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/en/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/en/tags/crawler/">Crawler</a> <a class="post-tag" href="/en/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/en/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/en/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/en/tags/hdfs/">HDFS</a> <a class="post-tag" href="/en/tags/alonhadat/">alonhadat</a> <a class="post-tag" href="/en/tags/hadoop-yarn/">Hadoop Yarn</a> <a class="post-tag" href="/en/tags/selenium/">Selenium</a> <a class="post-tag" href="/en/tags/data-ingestion/">Data Ingestion</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/en/posts/add-proxy-to-scrapy-project/"><div class="card-body"> <span class="timeago small" > Feb 15, 2023 <i class="unloaded">2023-02-15T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Configuring Proxy for Scrapy Project</h3><div class="text-muted small"><p> Proxy is probably a concept that’s no longer unfamiliar to everyone. For people working on data crawling, proxy is like an inseparable companion. In this article, I will guide how to configure prox...</p></div></div></a></div><div class="card"> <a href="/en/posts/crawl-1000-website-new-with-scrapy/"><div class="card-body"> <span class="timeago small" > Mar 1, 2023 <i class="unloaded">2023-03-01T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Crawl 1000 News Websites with Scrapy and MySQL</h3><div class="text-muted small"><p> If we write 1 spider to analyze information for each website, it will be very time-consuming, especially for news websites. There are thousands of different news websites and they’re still growing ...</p></div></div></a></div><div class="card"> <a href="/en/posts/scrapy-shell/"><div class="card-body"> <span class="timeago small" > Apr 1, 2023 <i class="unloaded">2023-04-01T20:52:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Introduction to Scrapy Shell</h3><div class="text-muted small"><p> Every time we write a spider, we have to write many css selector and xpath segments to analyze information, and many times we don’t know if they’re correct or not. Each time like that, we have to r...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/en/posts/no-need-protected-website-from-scraping/" class="btn btn-outline-primary" prompt="Older"><p>Why Website Owners Don't Completely Want to Protect Their Websites from Being Crawled?</p></a> <a href="/en/posts/add-proxy-to-scrapy-project/" class="btn btn-outline-primary" prompt="Newer"><p>Configuring Proxy for Scrapy Project</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2026 <a href="https://twitter.com/DeManejar">demanejar</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div><script type="text/javascript"> var links = document.links; for (var i = 0, linksLength = links.length; i < linksLength; i++) { if (links[i].hostname != window.location.hostname) { links[i].target = '_blank'; } } </script></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/en/tags/bigdata/">Bigdata</a> <a class="post-tag" href="/en/tags/crawler/">Crawler</a> <a class="post-tag" href="/en/tags/scrapy/">Scrapy</a> <a class="post-tag" href="/en/tags/apache-hadoop/">Apache Hadoop</a> <a class="post-tag" href="/en/tags/hadoop/">Hadoop</a> <a class="post-tag" href="/en/tags/hdfs/">HDFS</a> <a class="post-tag" href="/en/tags/alonhadat/">alonhadat</a> <a class="post-tag" href="/en/tags/hadoop-yarn/">Hadoop Yarn</a> <a class="post-tag" href="/en/tags/selenium/">Selenium</a> <a class="post-tag" href="/en/tags/data-ingestion/">Data Ingestion</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/en/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://demanejar.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
